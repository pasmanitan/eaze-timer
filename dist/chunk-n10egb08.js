var p=["/","/index.html","/assets/favicon/favicon.ico","/assets/favicon/site.webmanifest","/assets/audio/jingle.wav"];self.addEventListener("install",(e)=>{console.log("Service worker install event!"),e.waitUntil(caches.open("eaze-timer-v0").then((t)=>t.addAll(p)))});self.addEventListener("activate",()=>{console.log("Service worker activate event!")});self.addEventListener("fetch",(e)=>{console.log("Fetch intercepted for:",e.request.url),e.respondWith(caches.match(e.request).then((t)=>{if(t)return t;return fetch(e.request)}))});var m=document.getElementById("form"),l=document.querySelector("#timer"),a=document.querySelector("#timer_label"),d=document.querySelector("#jingle"),r=null,s=!1;function g(e,t,i){l.value=`${e<10?"0"+e:e}:${t<10?"0"+t:t}:${i<10?"0"+i:i}`,document.title=l.value}function f(){let e=m.elements.timer.value.trim().split(":"),t=0,i=0,n=0;if(e.length===3)[t,i,n]=e.map((o)=>Number(o)||0);else if(e.length===2)[i,n]=e.map((o)=>Number(o)||0);else if(e.length===1)n=Number(e[0])||0;if(r===null&&(t>0||i>0||n>0))s=!0,a.textContent="[t]oggle [r]eset",l.blur(),r=setInterval(()=>{if(t===0&&i===0&&n===0){u(),d.play();return}if(n===0){if(i>0)i--,n=59;else if(t>0)t--,i=59,n=59}else n--;g(t,i,n)},1000)}function c(){clearInterval(r),s=!1,r=null}function u(){c(),l.value="",a.textContent="eaze timer",document.title="eaze"}m.addEventListener("submit",(e)=>{e.preventDefault(),f()});l.addEventListener("input",function(){this.value=this.value.replace(/[^0-9:]/g,"")});l.addEventListener("focus",(e)=>{a.textContent="[f]ocus"});l.addEventListener("focusout",(e)=>{if(!s)a.textContent="eaze timer";else a.textContent="[t]oggle [r]eset"});document.addEventListener("keydown",(e)=>{if(e.key===" "||e.key==="t")if(e.preventDefault(),s)c();else f();if(e.key==="r")u();if(e.key==="f")if(e.preventDefault(),l.matches(":focus")===!0)l.blur();else l.focus()});
